<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#8B7355">
    <title>Drink Tracker</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Drink Tracker</h1>
            <p class="subtitle">Track your beverages</p>
        </header>

        <main>
            <nav class="tabs">
                <button class="tab-btn active" data-tab="log">Log Drink</button>
                <button class="tab-btn" data-tab="stats">Stats</button>
                <button class="tab-btn" data-tab="history">History</button>
            </nav>

            <div class="tab-content active" id="log-tab">
                <section class="add-drink-section">
                    <h2>Log a Drink</h2>
                    <form id="drink-form">
                        <div class="form-group">
                            <label for="drink-type">Drink Type</label>
                            <select id="drink-type" required>
                                <option value="">Select a drink...</option>
                                <option value="boba">üßã Boba</option>
                                <option value="energy-drink">‚ö°Ô∏è Energy Drink</option>
                                <option value="matcha">üçµ Matcha</option>
                                <option value="coffee">‚òïÔ∏è Coffee</option>  
                                <option value="other">üçπ Other</option>
                            </select>
                        </div>

                        <!-- Fields for boba, matcha, coffee, other -->
                        <div class="form-group conditional-field" id="place-field" style="display: none;">
                            <label for="drink-place">Place</label>
                            <input 
                                type="text" 
                                id="drink-place" 
                                list="places-list" 
                                placeholder="Enter place name..."
                                autocomplete="off"
                            />
                            <datalist id="places-list"></datalist>
                        </div>

                        <div class="form-group conditional-field" id="item-field" style="display: none;">
                            <label for="drink-item">Drink</label>
                            <input 
                                type="text" 
                                id="drink-item" 
                                list="items-list" 
                                placeholder="What did you get?"
                                autocomplete="off"
                            />
                            <datalist id="items-list"></datalist>
                        </div>

                        <!-- Toppings field for boba only -->
                        <div class="form-group conditional-field" id="toppings-field" style="display: none;">
                            <label>Toppings</label>
                            <div class="toppings-container">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="topping-boba" value="boba">
                                    <span>Boba</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="topping-jelly" value="jelly">
                                    <span>Jelly</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="topping-other" value="other">
                                    <span>Other</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="topping-none" value="none">
                                    <span>No Topping</span>
                                </label>
                            </div>
                        </div>

                        <!-- Fields for energy drink -->
                        <div class="form-group conditional-field" id="brand-field" style="display: none;">
                            <label for="drink-brand">Brand</label>
                            <input 
                                type="text" 
                                id="drink-brand" 
                                list="brands-list" 
                                placeholder="Enter brand name..."
                                autocomplete="off"
                            />
                            <datalist id="brands-list"></datalist>
                        </div>

                        <div class="form-group conditional-field" id="flavor-field" style="display: none;">
                            <label for="drink-flavor">Flavor</label>
                            <input 
                                type="text" 
                                id="drink-flavor" 
                                list="flavors-list" 
                                placeholder="Enter flavor..."
                                autocomplete="off"
                            />
                            <datalist id="flavors-list"></datalist>
                        </div>

                        <button type="submit" class="btn-primary" id="submit-btn" style="display: none;">Add Drink</button>
                    </form>
                </section>
            </div>

            <div class="tab-content" id="stats-tab">
                <section class="stats-section">
                    <div class="stats-header">
                        <h2>Stats</h2>
                        <div class="year-selector">
                            <label for="year-select">Year:</label>
                            <select id="year-select" class="year-select">
                                <!-- Options will be populated by JavaScript -->
                            </select>
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="boba-count">0</div>
                            <div class="stat-label">üßã Boba</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="coffee-count">0</div>
                            <div class="stat-label">‚òï Coffee</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="matcha-count">0</div>
                            <div class="stat-label">üçµ Matcha</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="energy-drink-count">0</div>
                            <div class="stat-label">‚ö°Ô∏è Energy Drink</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="other-count">0</div>
                            <div class="stat-label">üçπ Other</div>
                        </div>
                    </div>

                    <div class="stats-charts">
                        <div class="chart-container">
                            <h3>Drink Types Distribution</h3>
                            <canvas id="drink-type-chart"></canvas>
                        </div>

                        <div class="chart-container">
                            <h3>Monthly Boba Breakdown</h3>
                            <canvas id="monthly-chart"></canvas>
                        </div>

                        <div class="monthly-stats" id="monthly-stats-container">
                            <h3>Monthly Details</h3>
                            <div id="monthly-breakdown"></div>
                        </div>

                        <div class="chart-container" id="top-places-container" style="display: none;">
                            <h3>Top Places</h3>
                            <div id="top-places-list"></div>
                        </div>
                    </div>
                </section>
            </div>

            <div class="tab-content" id="history-tab">
                <section class="recent-section">
                    <h2>Recent Drinks</h2>
                    <div id="drinks-list" class="drinks-list">
                        <p class="empty-state">No drinks logged yet. Add your first drink above!</p>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Drink</h2>
                <button class="modal-close" aria-label="Close">&times;</button>
            </div>
            <form id="edit-form">
                <input type="hidden" id="edit-drink-id">
                
                <div class="form-group">
                    <label for="edit-drink-type">Drink Type</label>
                    <select id="edit-drink-type" required disabled>
                        <option value="boba">Boba</option>
                        <option value="energy-drink">Energy Drink</option>
                        <option value="matcha">Matcha</option>
                        <option value="coffee">Coffee</option>  
                        <option value="other">Other</option>
                    </select>
                    <p class="form-note">Type cannot be changed</p>
                </div>

                <!-- Fields for boba, matcha, coffee, other -->
                <div class="form-group" id="edit-place-field" style="display: none;">
                    <label for="edit-drink-place">Place</label>
                    <input 
                        type="text" 
                        id="edit-drink-place" 
                        placeholder="Enter place name..."
                    />
                </div>

                <div class="form-group" id="edit-item-field" style="display: none;">
                    <label for="edit-drink-item">Drink</label>
                    <input 
                        type="text" 
                        id="edit-drink-item" 
                        placeholder="What did you get?"
                    />
                </div>

                <!-- Toppings field for boba only -->
                <div class="form-group" id="edit-toppings-field" style="display: none;">
                    <label>Toppings</label>
                    <div class="toppings-container">
                        <label class="checkbox-label">
                            <input type="checkbox" id="edit-topping-boba" value="boba">
                            <span>Boba</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="edit-topping-jelly" value="jelly">
                            <span>Jelly</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="edit-topping-other" value="other">
                            <span>Other</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="edit-topping-none" value="none">
                            <span>No Topping</span>
                        </label>
                    </div>
                </div>

                <!-- Fields for energy drink -->
                <div class="form-group" id="edit-brand-field" style="display: none;">
                    <label for="edit-drink-brand">Brand</label>
                    <input 
                        type="text" 
                        id="edit-drink-brand" 
                        placeholder="Enter brand name..."
                    />
                </div>

                <div class="form-group" id="edit-flavor-field" style="display: none;">
                    <label for="edit-drink-flavor">Flavor</label>
                    <input 
                        type="text" 
                        id="edit-drink-flavor" 
                        placeholder="Enter flavor..."
                    />
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancel-edit-btn">Cancel</button>
                    <button type="submit" class="btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="app.js"></script>
</body>
</html>